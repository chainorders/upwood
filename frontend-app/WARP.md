# WARP.md

This file provides guidance to WARP (warp.dev) when working with the frontend application workspace.

## Workspace Overview

Modern React-based user interface for forest project investment and carbon credit trading. Built with React 18, TypeScript, Vite, and Tailwind CSS, providing an intuitive interface for Concordium blockchain wallet integration and RWA platform interaction.

## Development Environment

### Prerequisites
- Uses VS Code dev container (`.devcontainer/frontend-app/`)
- Node.js with Vite development server
- Auto-generated API client from backend workspace
- Concordium wallet integration for blockchain interactions

### Container Setup
```bash
# Open in VS Code dev container
# Dev Containers: Reopen in Container → Select "frontend-app"
# Container auto-installs dependencies and shows available scripts
```

## Core Development Commands

### Development Server
```bash
yarn dev                        # Start development server with HMR (port 5173)
yarn preview                    # Preview production build locally
```

### Building
```bash
yarn build                      # Production build (tsc -b && vite build)
```

### Code Quality
```bash
yarn lint                       # Run ESLint checks
yarn lint:fix                   # Auto-fix ESLint issues
yarn format                     # Format code with Prettier
```

## Project Architecture

### Technology Stack
- **React 18** - Modern React with concurrent features
- **TypeScript** - Type-safe development
- **Vite** - Fast build tool and development server (runs on port 5173)
- **Tailwind CSS** - Utility-first CSS framework

### Key Libraries
- **@concordium/browser-wallet-api-helpers** - Concordium wallet integration
- **@concordium/web-sdk** - Blockchain interactions
- **react-router** - Client-side routing
- **react-hook-form** - Form management and validation
- **chart.js & react-chartjs-2** - Data visualization
- **amazon-cognito-identity-js** - AWS Cognito authentication

## Directory Structure

### Source Organization
```
src/
├── adminSection/           # Administrative interfaces
├── apiClient/             # Generated API client from backend
├── assets/               # Application assets (images, fonts)
├── components/           # Reusable UI components
├── contractClients/      # Concordium contract interaction clients
├── lib/                  # Utility libraries and helpers
├── pages/               # Page components and routing
├── styles/              # Global styles and themes
├── theme/               # UI theme configuration
├── types/               # TypeScript type definitions
├── App.tsx             # Main application component
└── main.tsx            # Application entry point
```

## Development Patterns

### Component Structure
```typescript
// React component with TypeScript
interface ComponentProps {
  // prop definitions
}

export const Component: React.FC<ComponentProps> = ({ props }) => {
  // component logic
  return (
    <div className="tailwind-classes">
      {/* JSX */}
    </div>
  );
};
```

### API Client Usage
```typescript
// Using auto-generated API client
import { ApiClient } from './apiClient';

const client = new ApiClient({
  baseUrl: process.env.VITE_API_BASE_URL
});

// API calls
const projects = await client.forestProjects.getProjects();
```

### Concordium Wallet Integration
```typescript
// Wallet interaction pattern
import { detectConcordiumProvider } from '@concordium/browser-wallet-api-helpers';

const provider = await detectConcordiumProvider();
const accounts = await provider.getMostRecentlySelectedAccount();
```

## Environment Configuration

### Environment Variables
Create `.env.local` or `.env.development`:
```bash
VITE_API_BASE_URL=http://localhost:3000
VITE_CONCORDIUM_NODE_URL=https://grpc.testnet.concordium.com:20000
VITE_NETWORK=testnet
VITE_COGNITO_USER_POOL_ID=your_user_pool_id
VITE_COGNITO_CLIENT_ID=your_client_id
```

### Network Configuration
```typescript
// Network-specific settings
const config = {
  testnet: {
    nodeUrl: 'https://grpc.testnet.concordium.com:20000',
    network: 'testnet'
  },
  mainnet: {
    nodeUrl: 'https://grpc.mainnet.concordium.software:20000', 
    network: 'mainnet'
  }
};
```

## API Integration

### Backend API Client
- **Auto-generated** from backend OpenAPI specification
- **Location**: `src/apiClient/` (generated by backend `yarn generate:client`)
- **Update**: Regenerated when backend API changes
- **Usage**: Import client classes for type-safe API calls

### Contract Clients
```typescript
// Smart contract interaction
import { ContractClient } from './contractClients/ForestProjectClient';

const client = new ContractClient(wallet, contractAddress);
const result = await client.mintTokens(params);
```

## Testing Strategy

### Component Testing
```bash
# Add testing framework (planned)
# React Testing Library for component tests
# Jest for unit testing
```

### API Integration Testing
```bash
# Test against generated API client
# Mock API responses for isolated component testing
```

## Common Development Tasks

### Adding New Page/Route
1. Create page component in `src/pages/`
2. Add route to main router configuration
3. Update navigation components
4. Add any required API client calls

### Adding New Component
1. Create component in appropriate `src/components/` subdirectory
2. Follow TypeScript interface patterns
3. Use Tailwind CSS for styling
4. Export from component index files

### Styling with Tailwind
```bash
# Tailwind configuration in tailwind.config.js
# Custom styles in src/styles/
# Component-specific styles using Tailwind classes
```

### Form Handling
```typescript
// React Hook Form pattern
import { useForm } from 'react-hook-form';

const { register, handleSubmit, formState: { errors } } = useForm();

const onSubmit = (data) => {
  // Handle form submission
};
```

## Wallet Development

### Concordium Wallet Integration
```typescript
// Detect and connect to wallet
const provider = await detectConcordiumProvider();
await provider.connect();

// Get account information
const account = await provider.getMostRecentlySelectedAccount();

// Sign transactions
const signature = await provider.signMessage(account, message);
```

### Transaction Handling
```typescript
// Send contract transaction
const txHash = await provider.sendTransaction(
  account,
  contractAddress,
  receiveName,
  parameter,
  maxEnergy
);
```

## Build Configuration

### Vite Configuration
- **Dev Server**: Hot module replacement, source maps
- **Production**: Optimized bundles, tree shaking, code splitting
- **Config File**: `vite.config.ts`

### TypeScript Configuration
- **Strict Mode**: Enabled for type safety
- **Path Mapping**: Configured for clean imports
- **Config File**: `tsconfig.json`

## Debugging & Development

### Development Tools
```bash
# Start with specific log level
VITE_LOG_LEVEL=debug yarn dev

# Build analysis
yarn build --analyze

# Type checking
tsc --noEmit
```

### Browser DevTools
- React Developer Tools extension
- Concordium wallet extension for blockchain testing
- Network tab for API call inspection

## API Client Workflow

1. **Backend Changes**: Backend team updates API endpoints
2. **Regeneration**: Backend runs `yarn generate:client`  
3. **Auto-Update**: TypeScript client updated in `src/apiClient/`
4. **Type Safety**: Frontend gets updated types automatically
5. **Import**: Use updated client classes in components

## Prettier Configuration
```json
{
  "tabWidth": 1,
  "useTabs": true,
  "semi": true,
  "singleQuote": false,
  "trailingComma": "all",
  "printWidth": 120
}
```
